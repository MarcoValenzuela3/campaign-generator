<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Amazon Campaign Name Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      padding: 24px;
    }
    .app {
      width: 100%;
      max-width: 960px;
      background: #020617;
      border-radius: 18px;
      padding: 24px;
      border: 1px solid #1e293b;
      box-shadow: 0 20px 40px rgba(15,23,42,0.9);
    }
    h1 {
      margin-top: 0;
      font-size: 1.5rem;
    }
    label {
      font-size: 0.8rem;
      color: #9ca3af;
      letter-spacing: 0.03em;
    }
    input, select {
      padding: 8px 10px;
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 10px;
      color: #e5e7eb;
      font-size: 0.9rem;
    }
    select:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap: 16px;
      margin-top: 12px;
    }
    .keyword-input {
      margin-top: 8px;
    }
    .output-card {
      margin-top: 24px;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid #1f2937;
      background: #0f172a;
    }
    .campaign-preview {
      background: #020617;
      border: 1px solid #111827;
      border-radius: 10px;
      padding: 10px;
      font-family: "JetBrains Mono", monospace;
      font-size: 0.9rem;
      min-height: 24px;
    }
    .placeholder {
      color: #6b7280;
      font-style: italic;
    }
    .button-primary {
      padding: 8px 14px;
      border: none;
      border-radius: 10px;
      background: #16a34a;
      color: white;
      cursor: pointer;
      margin-top: 10px;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <div class="app">
    <h1>AMZ Campaign Name Generator</h1>

    <div class="grid">
      <div>
        <label>Brand Code</label>
        <select id="brandCode">
          <option value="">Select</option>
          <option value="TD">TD</option>
          <option value="CG">CG</option>
          <option value="PC">PC</option>
        </select>
      </div>

      <div>
        <label>Product Name Short</label>
        <input id="productShort" type="text" />
      </div>

      <div>
        <label>Parent</label>
        <input id="parent" type="text" />
      </div>

      <div>
        <label>Child</label>
        <input id="child" type="text" />
      </div>

      <div>
        <label>Objective</label>
        <select id="objective">
          <option value="">Select Objective</option>
          <option value="Discover">Discover</option>
          <option value="Competition">Competition</option>
          <option value="BKW Defense">BKW Defense</option>
          <option value="BP Defense">BP Defense</option>
          <option value="Ranking KW">Ranking KW</option>
        </select>
      </div>

      <div>
        <label>Targeting</label>
        <select id="targeting" disabled>
          <option value="">Select Objective first</option>
        </select>

        <!-- Keyword text field appears only when needed -->
        <input 
          id="keywordInput" 
          class="keyword-input" 
          type="text" 
          placeholder="Enter keyword…" 
          style="display:none;" 
        />
      </div>

      <div>
        <label>Match Type</label>
        <select id="matchType" disabled>
          <option value="">Select Targeting first</option>
        </select>
      </div>

      <div>
        <label>Owner's Name</label>
        <select id="ownerName">
          <option value="">Select Owner</option>
          <option value="Summer">Summer</option>
          <option value="Aurora">Aurora</option>
          <option value="Kiki">Kiki</option>
          <option value="Isabella">Isabella</option>
          <option value="Ming">Ming</option>
          <option value="John">John</option>
        </select>
      </div>
    </div>

    <div class="output-card">
      <h3>Campaign Name</h3>
      <div id="campaignPreview" class="campaign-preview placeholder">Waiting...</div>
      <button id="copyButton" class="button-primary">Copy</button>
    </div>
  </div>

<script>
/* ----------------------------------------------------------
   OBJECTIVE → TARGETING RULES (Updated: Ranking KW only = Keyword)
---------------------------------------------------------- */
const objectiveToTargeting = {
  "Discover": ["Auto", "Category", "Manual KW"],
  "Competition": ["Manual PAT", "Manual KW"],
  "BKW Defense": ["Manual KW"],
  "BP Defense": ["Manual PAT"],
  "Ranking KW": ["Keyword"]   // ⭐ Manual KW removed
};

/* ----------------------------------------------------------
   TARGETING → MATCH TYPE RULES (Logic Set B)
---------------------------------------------------------- */
const targetingToMatchType = {
  // Discover
  "Auto (Discover)": [],
  "Category (Discover)": [],
  "Manual KW (Discover)": ["Broad"],

  // Competition
  "Manual PAT (Competition)": ["Expanded", "Exact"],
  "Manual KW (Competition)": ["Exact", "Phrase", "Broad"],

  // BKW Defense
  "Manual KW (BKW Defense)": ["Phrase", "Exact", "Broad"],

  // BP Defense
  "Manual PAT (BP Defense)": [],

  // Ranking KW
  "Keyword (Ranking KW)": ["Broad", "Phrase", "Exact"]  // ⭐ now only keyword option
};

/* ----------------------------------------------------------
   INPUT ELEMENTS
---------------------------------------------------------- */
const brand = document.getElementById("brandCode");
const productShort = document.getElementById("productShort");
const parentEl = document.getElementById("parent");
const childEl = document.getElementById("child");
const objective = document.getElementById("objective");
const targeting = document.getElementById("targeting");
const matchType = document.getElementById("matchType");
const ownerName = document.getElementById("ownerName");
const keywordInput = document.getElementById("keywordInput");
const preview = document.getElementById("campaignPreview");

/* ----------------------------------------------------------
   UPDATE TARGETING WHEN OBJECTIVE CHANGES
---------------------------------------------------------- */
objective.addEventListener("change", () => {
  const obj = objective.value;

  targeting.innerHTML = "";
  matchType.innerHTML = "";
  keywordInput.style.display = "none"; 
  keywordInput.value = "";

  if (!obj) {
    targeting.disabled = true;
    matchType.disabled = true;
    updatePreview();
    return;
  }

  const options = objectiveToTargeting[obj];
  targeting.disabled = false;
  targeting.innerHTML = `<option value="">Select Targeting</option>`;
  options.forEach(t => {
    targeting.innerHTML += `<option value="${t}">${t}</option>`;
  });

  matchType.disabled = true;
  matchType.innerHTML = `<option>Select Targeting first</option>`;
  updatePreview();
});

/* ----------------------------------------------------------
   UPDATE MATCH TYPE + KEYWORD FIELD
---------------------------------------------------------- */
targeting.addEventListener("change", () => {
  const obj = objective.value;
  const tgt = targeting.value;

  if (tgt === "Keyword") {
    keywordInput.style.display = "block";
  } else {
    keywordInput.style.display = "none";
    keywordInput.value = "";
  }

  if (!tgt) {
    matchType.disabled = true;
    matchType.innerHTML = `<option>Select Targeting first</option>`;
    updatePreview();
    return;
  }

  const comboKey = `${tgt} (${obj})`;
  const allowed = targetingToMatchType[comboKey];

  if (!allowed || allowed.length === 0) {
    matchType.disabled = true;
    matchType.innerHTML = `<option>No Match Type</option>`;
    updatePreview();
    return;
  }

  matchType.disabled = false;
  matchType.innerHTML = `<option value="">Select Match Type</option>`;
  allowed.forEach(m => {
    matchType.innerHTML += `<option value="${m}">${m}</option>`;
  });

  updatePreview();
});

/* ----------------------------------------------------------
   BUILD CAMPAIGN NAME (Keyword Logic Included)
---------------------------------------------------------- */
function buildCampaignName() {
  let targetingValue = targeting.value;

  if (targetingValue === "Keyword") {
    targetingValue = keywordInput.value.trim() || "";
  }

  const parts = [
    brand.value,
    productShort.value,
    parentEl.value,
    childEl.value,
    objective.value,
    targetingValue,
    matchType.disabled ? null : matchType.value,
    ownerName.value
  ].filter(Boolean);

  return parts.join(" | ");
}

/* ----------------------------------------------------------
   UPDATE PREVIEW
---------------------------------------------------------- */
function updatePreview() {
  const name = buildCampaignName();
  if (!name) {
    preview.textContent = "Waiting...";
    preview.classList.add("placeholder");
  } else {
    preview.textContent = name;
    preview.classList.remove("placeholder");
  }
}

/* ----------------------------------------------------------
   EVENT LISTENERS
---------------------------------------------------------- */
brand.addEventListener("change", updatePreview);
productShort.addEventListener("input", updatePreview);
parentEl.addEventListener("input", updatePreview);
childEl.addEventListener("input", updatePreview);
keywordInput.addEventListener("input", updatePreview);
matchType.addEventListener("change", updatePreview);
ownerName.addEventListener("change", updatePreview);

/* ----------------------------------------------------------
   COPY BUTTON
---------------------------------------------------------- */
document.getElementById("copyButton").addEventListener("click", () => {
  const name = buildCampaignName();
  if (!name) return alert("Nothing to copy!");
  navigator.clipboard.writeText(name);
  alert("Copied!");
});
</script>
</body>
</html>
