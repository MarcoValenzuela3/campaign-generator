<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Amazon Campaign Name Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      padding: 24px;
    }
    .app {
      width: 100%;
      max-width: 960px;
      background: #020617;
      border-radius: 18px;
      padding: 24px 24px 28px;
      border: 1px solid #1e293b;
      box-shadow: 0 20px 40px rgba(15,23,42,0.9);
    }
    h1 {
      margin-top: 0;
      font-size: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    label {
      font-size: 0.75rem;
      letter-spacing: 0.07em;
      color: #9ca3af;
    }
    input, select {
      padding: 8px 10px;
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 10px;
      color: #e5e7eb;
      font-size: 0.9rem;
    }
    select:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap: 16px;
      margin-top: 12px;
    }
    .output-card {
      margin-top: 24px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid #1f2937;
      background: radial-gradient(circle at top left, #0f172a, #020617 40%);
    }
    .campaign-preview {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.9rem;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #111827;
      background: #020617;
      min-height: 25px;
    }
    .placeholder {
      color: #6b7280;
      font-style: italic;
    }
    .button-primary {
      padding: 8px 14px;
      border: none;
      border-radius: 10px;
      background: #16a34a;
      color: white;
      cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <div class="app">
    <h1>AMZ Campaign Name Generator</h1>

    <div class="grid">
      <div>
        <label>Brand Code</label>
        <select id="brandCode">
          <option value="">Select</option>
          <option value="TD">TD</option>
          <option value="CG">CG</option>
          <option value="PC">PC</option>
        </select>
      </div>

      <div>
        <label>Product Name Short</label>
        <input id="productShort" type="text" />
      </div>

      <div>
        <label>Parent</label>
        <input id="parent" type="text" />
      </div>

      <div>
        <label>Child</label>
        <input id="child" type="text" />
      </div>

      <div>
        <label>Objective</label>
        <select id="objective">
          <option value="">Select Objective</option>
          <option value="Discover">Discover</option>
          <option value="Competition">Competition</option>
          <option value="BKW Defense">BKW Defense</option>
          <option value="BP Defense">BP Defense</option>
          <option value="Ranking KW">Ranking KW</option>
        </select>
      </div>

      <div>
        <label>Targeting</label>
        <select id="targeting" disabled>
          <option value="">Select Objective first</option>
        </select>
      </div>

      <div>
        <label>Match Type</label>
        <select id="matchType" disabled>
          <option value="">Select Targeting first</option>
        </select>
      </div>

      <div>
        <label>Owner Initials</label>
        <input id="ownerInitials" maxlength="4" placeholder="e.g. MV" />
      </div>
    </div>

    <div class="output-card">
      <h3>Campaign Name</h3>
      <div id="campaignPreview" class="campaign-preview placeholder">Waiting...</div>
      <br />
      <button id="copyButton" class="button-primary">Copy</button>
    </div>
  </div>

<script>
/* ------------------ NEW UPDATED LOGIC --------------------- */

const objectiveToTargeting = {
  "Discover": ["Auto", "Category", "Manual KW"],
  "Competition": ["Manual PAT", "Manual KW"],
  "BKW Defense": ["Manual KW"],
  "BP Defense": ["Manual PAT"],
  "Ranking KW": ["Manual KW"]
};

const targetingToMatchType = {
  // Discover
  "Auto": [],
  "Category": ["Broad"],
  "Manual KW (Discover)": ["Broad"],

  // Competition
  "Manual PAT (Competition)": ["Expanded", "Exact"],
  "Manual KW (Competition)": ["Exact", "Phrase", "Broad"],

  // BKW Defense
  "Manual KW (BKW Defense)": ["Phrase", "Exact", "Broad"],

  // BP Defense
  "Manual PAT (BP Defense)": [],

  // Ranking KW
  "Manual KW (Ranking KW)": ["Broad", "Phrase", "Exact"]
};

// Inputs
const brand = document.getElementById("brandCode");
const productShort = document.getElementById("productShort");
const parentEl = document.getElementById("parent");
const childEl = document.getElementById("child");
const objective = document.getElementById("objective");
const targeting = document.getElementById("targeting");
const matchType = document.getElementById("matchType");
const initials = document.getElementById("ownerInitials");
const preview = document.getElementById("campaignPreview");

// Update Targeting when Objective changes
objective.addEventListener("change", () => {
  const obj = objective.value;

  targeting.innerHTML = "";
  matchType.innerHTML = "";

  if (!obj) {
    targeting.disabled = true;
    matchType.disabled = true;
    updatePreview();
    return;
  }

  const tgts = objectiveToTargeting[obj];
  targeting.disabled = false;
  targeting.innerHTML = `<option value="">Select Targeting</option>`;
  tgts.forEach(t => {
    targeting.innerHTML += `<option value="${t}">${t}</option>`;
  });

  matchType.disabled = true;
  matchType.innerHTML = `<option value="">Select Targeting first</option>`;

  updatePreview();
});

// Update Match Type Logic
targeting.addEventListener("change", () => {
  const obj = objective.value;
  const tgt = targeting.value;

  if (!tgt) {
    matchType.disabled = true;
    matchType.innerHTML = `<option>Select Targeting first</option>`;
    updatePreview();
    return;
  }

  // Dynamic key
  const comboKey = `${tgt} (${obj})`;
  const mt = targetingToMatchType[comboKey];

  // If no match types allowed
  if (!mt || mt.length === 0) {
    matchType.disabled = true;
    matchType.innerHTML = `<option value="">No Match Type</option>`;
    updatePreview();
    return;
  }

  matchType.disabled = false;
  matchType.innerHTML = `<option value="">Select Match Type</option>`;
  mt.forEach(m => {
    matchType.innerHTML += `<option value="${m}">${m}</option>`;
  });

  updatePreview();
});

// Auto-uppercase initials
initials.addEventListener("input", () => {
  let v = initials.value.toUpperCase();
  if (v !== "PPCN") {
    v = v.replace(/[^A-Z]/g, "").slice(0, 2);
  }
  initials.value = v;
  updatePreview();
});

// Build campaign name (Option A)
function buildCampaignName() {
  const parts = [
    brand.value,
    productShort.value,
    parentEl.value,
    childEl.value,
    objective.value,
    targeting.value,
    matchType.value,
    initials.value
  ].filter(Boolean);

  return parts.join(" | ");
}

// Update live preview
function updatePreview() {
  const name = buildCampaignName();
  if (!name) {
    preview.textContent = "Waiting...";
    preview.classList.add("placeholder");
  } else {
    preview.textContent = name;
    preview.classList.remove("placeholder");
  }
}

brand.addEventListener("change", updatePreview);
productShort.addEventListener("input", updatePreview);
parentEl.addEventListener("input", updatePreview);
childEl.addEventListener("input", updatePreview);
matchType.addEventListener("change", updatePreview);

// Copy button
document.getElementById("copyButton").addEventListener("click", () => {
  const name = buildCampaignName();
  if (!name) return alert("Nothing to copy!");
  navigator.clipboard.writeText(name);
  alert("Copied!");
});
</script>

</body>
</html>

